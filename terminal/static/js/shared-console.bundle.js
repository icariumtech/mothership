import{j as e,r as t,R as n}from"./chunks/client-BRw6SIuC.js";function s({title:t,subtitle:n,rightText:s,hidden:l=!1}){return l?null:e.jsxs("header",{className:"terminal-header",children:[e.jsxs("div",{className:"terminal-header-left",children:[e.jsx("h1",{children:t}),n&&e.jsx("span",{className:"subtitle",children:n})]}),s&&e.jsx("div",{className:"terminal-header-right",children:s})]})}const l=["SYSTEM ONLINE","ALL SYSTEMS NOMINAL","STANDBY MODE","AWAITING ORDERS","QUANTUM FLUX DETECTED","STABILIZING FIELD","NEURAL INTERFACE ACTIVE","SYNAPTIC LINK STABLE","BIOMETRIC SCAN COMPLETE","IDENTITY CONFIRMED","HULL INTEGRITY: 98%","MINOR BREACH SEALED","LIFE SUPPORT: NOMINAL","O2 LEVELS: OPTIMAL","REACTOR CORE: STABLE","POWER OUTPUT: 100%","NAVIGATION READY","COORDINATES LOCKED","COMMS ARRAY: ONLINE","SIGNAL STRENGTH: FULL","SENSOR SWEEP: CLEAR","NO CONTACTS DETECTED","ENGINES: IDLE","FUEL: 87%","CARGO BAY: SECURE","CONTAINMENT HOLDING","ATMOSPHERIC PRESSURE: STABLE","GRAVITY: 1.0G","SCANNING...","ANALYSIS IN PROGRESS","PROCESSING...","DECRYPTING DATA","INITIALIZING...","BOOT SEQUENCE ACTIVE","CRYO BAY: EMPTY","ALL PODS DORMANT","MEDICAL: STANDBY","AUTO-DOC READY","WEAPONS: OFFLINE","SAFETY PROTOCOLS ENGAGED","SHIELDS: CHARGING","42% CAPACITY","JUMP DRIVE: READY","FTL AVAILABLE","RADIATION LEVELS: SAFE","DOSE: 0.3 mSv","TARGETING SYSTEMS: OFFLINE","PEACE MODE ACTIVE","DRONE BAY: SEALED","3 UNITS READY","MINING LASER: STANDBY","CAPACITOR CHARGED","EMERGENCY BEACON: ACTIVE","BROADCASTING SOS","WARP CORE: STABLE","CONTAINMENT AT 100%","AIRLOCK STATUS: SECURE","PRESSURE NOMINAL","LABORATORY: SEALED","QUARANTINE ACTIVE","BRIDGE ACCESS: GRANTED","WELCOME COMMANDER","UNKNOWN SIGNAL DETECTED","TRACKING SOURCE","HEAT SIGNATURE: ANOMALOUS","INVESTIGATING","PROXIMITY ALERT","OBJECT AT 200M","SYSTEM DIAGNOSTICS COMPLETE","NO ERRORS FOUND","FIRMWARE UPDATE AVAILABLE","VERSION 3.7.2","BACKUP POWER: 100%","BATTERIES FULL","WASTE RECYCLING: ACTIVE","EFFICIENCY: 94%","FOOD STORES: ADEQUATE","142 DAYS REMAINING","WATER PURIFICATION: ONLINE","RESERVES: 89%","SUIT TELEMETRY: NOMINAL","ALL CREW ACCOUNTED FOR","BLACK BOX: RECORDING","FLIGHT DATA LOGGED","AUTO-PILOT: ENGAGED","COURSE LOCKED","STELLAR CARTOGRAPHY","MAP UPDATE: 99%","ANOMALY DETECTED","CLASSIFICATION: UNKNOWN","TEMPORAL DRIFT: MINIMAL","CHRONOMETER SYNCED","EXOTIC MATTER: DETECTED","ANALYSIS PENDING","VOID EXPOSURE: MINIMAL","CREW SAFETY: GREEN","DARK MATTER READINGS","THRESHOLD EXCEEDED","SUBSPACE INTERFERENCE","COMPENSATING","ALIEN ARTIFACT DETECTED","ORIGIN: UNKNOWN","DISTRESS CALL RECEIVED","INVESTIGATING TRANSMISSION"];function a({title:n="MOTHERSHIP",subtitle:s="The Outer Veil"}){const a=t.useRef(null),r=t.useRef(null),i=t.useRef(null),o=t.useRef([]),c=t.useRef(null),E=t.useCallback(e=>{const t=(70*Math.random()-35).toFixed(0),n=(40*Math.random()-20).toFixed(0),s=(60*Math.random()-30).toFixed(0),l=(40*Math.random()-20).toFixed(0),a=(40*Math.random()-20).toFixed(0),r=(30*Math.random()-15).toFixed(0);e.style.setProperty("--glitch-x1",`${t}px`),e.style.setProperty("--glitch-y1",`${n}px`),e.style.setProperty("--glitch-x2",`${s}px`),e.style.setProperty("--glitch-y2",`${l}px`),e.style.setProperty("--glitch-x3",`${a}px`),e.style.setProperty("--glitch-y3",`${r}px`)},[]),d=t.useCallback(()=>{const e=Math.floor(4*Math.random())+1,t=[],n=[...l];for(let s=0;s<e;s++){const e=Math.floor(Math.random()*n.length);t.push("> "+n[e]),n.splice(e,1)}return t.join("\n")},[]),A=t.useCallback((e,t,n,s)=>{for(const l of o.current)if(!(e+n<l.x||e>l.x+l.width||t+s<l.y||t>l.y+l.height))return!0;return!1},[]),u=t.useCallback((e,t)=>{for(let n=0;n<50;n++){let n=80*Math.random()+10,s=80*Math.random()+10;if(n>30&&n<70&&s>30&&s<70&&(Math.random()>.5?n=n<50?n-35:n+35:s=s<50?s-35:s+35),!A(n,s,e,t))return{x:n,y:s}}return null},[A]),N=t.useCallback(()=>{const e=a.current;if(!e)return;const t=d(),n=t.split("\n").length,s=.6*Math.max(...t.split("\n").map(e=>e.length)),l=2*n,r=u(s,l);if(!r)return;const i=document.createElement("div");i.className="text-block",i.style.left=r.x+"%",i.style.top=r.y+"%",e.appendChild(i);const c={x:r.x,y:r.y,width:s,height:l};o.current.push(c);let E="",A=0;const N=setInterval(()=>{A<t.length?(E+=t[A],i.textContent=E,A++):clearInterval(N)},50);setTimeout(()=>{i.remove();const e=o.current.indexOf(c);e>-1&&o.current.splice(e,1)},6e3)},[d,u]),T=t.useCallback(()=>{N();const e=600*Math.random()+400;c.current=window.setTimeout(T,e)},[N]);return t.useEffect(()=>{const e=r.current,t=i.current;e&&E(e),t&&E(t);const n=()=>{e&&E(e)},s=()=>{t&&E(t)};null==e||e.addEventListener("animationiteration",n),null==t||t.addEventListener("animationiteration",s);const l=window.setTimeout(T,500);return()=>{null==e||e.removeEventListener("animationiteration",n),null==t||t.removeEventListener("animationiteration",s),clearTimeout(l),c.current&&clearTimeout(c.current)}},[E,T]),e.jsx("div",{className:"standby-view",ref:a,children:e.jsxs("div",{className:"standby-logo",children:[e.jsx("div",{className:"standby-text",ref:r,"data-text":n,children:n}),e.jsx("div",{className:"standby-subtitle",ref:i,children:s})]})})}function r({title:t,children:n,className:s=""}){return e.jsxs("div",{className:`panel-base border-all ${s}`,children:[e.jsx("div",{className:"dashboard-panel-header",children:e.jsx("h3",{children:t})}),e.jsx("div",{className:"dashboard-panel-content",children:n})]})}function i({campaignTitle:t="THE OUTER VEIL CAMPAIGN",crew:n=[],notes:s=[],starSystems:l=[],statusItems:a=[],onSystemSelect:i,onSystemMapClick:o,selectedSystem:c=null}){return e.jsxs("div",{className:"campaign-dashboard",children:[e.jsx("div",{className:"dashboard-top panel-base chamfer-bl-br border-all corner-line-bl-br",children:e.jsx("div",{className:"dashboard-top-content",children:t})}),e.jsxs("div",{className:"dashboard-left",children:[e.jsx(r,{title:"CREW",className:"chamfer-tr-bl corner-line-tr-bl",children:n.length>0?n.map((t,n)=>e.jsxs("p",{children:["> ",t]},n)):e.jsx("p",{children:"> No crew assigned"})}),e.jsx(r,{title:"NOTES",className:"chamfer-tr-bl corner-line-tr-bl",children:s.length>0?s.map((t,n)=>e.jsxs("p",{children:["> ",t]},n)):e.jsx("p",{children:"> No notes"})})]}),e.jsxs("div",{className:"dashboard-right",children:[e.jsx(r,{title:"STAR MAP",className:"chamfer-tl-br corner-line-tl-br",children:l.length>0?l.map(t=>e.jsxs("div",{className:"star-system-row "+(c===t.name?"selected":""),onClick:()=>null==i?void 0:i(t.name),children:[e.jsxs("div",{className:"star-system-content",children:[e.jsx("div",{className:"star-system-checkbox "+(c===t.name?"checked":"")}),e.jsx("div",{className:"star-system-name",children:t.name})]}),t.hasSystemMap&&e.jsx("div",{className:"system-map-btn-container",title:"View system map",onClick:e=>{e.stopPropagation(),null==o||o(t.name)},children:e.jsx("span",{className:"system-map-btn-icon",children:"â–¶"})})]},t.name)):e.jsx("p",{children:"> No star systems found"})}),e.jsx(r,{title:"STATUS",className:"chamfer-tl-br corner-line-tl-br",children:a.length>0?a.map((t,n)=>e.jsxs("p",{children:["> ",t]},n)):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"> All systems nominal"}),e.jsx("p",{children:"> Course steady"})]})})]})]})}function o({title:n,content:s,visible:l,showDecorators:a=!0,typewriterSpeed:r=15}){const i=t.useRef(null),[o,c]=t.useState(0),{displayedContent:E}=function(e,n={}){const{speed:s=15,showCursor:l=!0,cursorChar:a="_",onComplete:r}=n,[i,o]=t.useState(""),[c,E]=t.useState(!1),d=t.useRef(0),A=t.useRef(null),u=t.useCallback(()=>{A.current&&clearTimeout(A.current),o(""),E(!1)},[]);return t.useEffect(()=>{if(!e)return o(""),void E(!1);d.current++;const t=d.current,n=document.createElement("div");n.innerHTML=e;const i=n.textContent||"";let c=0;function u(e,t){if(e.nodeType===Node.TEXT_NODE){const n=e.textContent||"",s=t.textIndex,r=t.textIndex+n.length;t.textIndex=r;const i=Math.min(n.length,Math.max(0,t.targetCharIndex-s)),o=n.substring(0,i);return l&&!t.cursorInserted&&t.targetCharIndex>=s&&t.targetCharIndex<=r?(t.cursorInserted=!0,o+`<span class="typing-cursor">${a}</span>`):o}if(e.nodeType===Node.ELEMENT_NODE){const n=e,s=n.tagName.toLowerCase(),l=n.className?` class="${n.className}"`:"";let a="";for(const r of Array.from(e.childNodes))a+=u(r,t);return a.length>0||t.cursorInserted?`<${s}${l}>${a}</${s}>`:""}return""}return o(""),E(!0),function e(){if(d.current===t)if(c<i.length){c++;const t={textIndex:0,cursorInserted:!1,targetCharIndex:c};let r="";for(const e of Array.from(n.childNodes))r+=u(e,t);l&&!t.cursorInserted&&(r+=`<span class="typing-cursor">${a}</span>`),o(r),A.current=window.setTimeout(e,s)}else{const e={textIndex:0,cursorInserted:!0,targetCharIndex:i.length};let t="";for(const s of Array.from(n.childNodes))t+=u(s,e);o(t),E(!1),null==r||r()}}(),()=>{A.current&&clearTimeout(A.current)}},[e,s,l,a,r]),{displayedContent:i,isTyping:c,reset:u}}(l?s:"",{speed:r,showCursor:!0});return t.useEffect(()=>{function e(){if(!i.current||!l||!a)return;const e=i.current.getBoundingClientRect();c(e.bottom+5-35-5)}e();const t=new ResizeObserver(e);return i.current&&t.observe(i.current),window.addEventListener("resize",e),()=>{t.disconnect(),window.removeEventListener("resize",e)}},[l,a]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:i,className:"info-panel "+(l?"visible":""),children:[e.jsx("div",{className:"info-panel-header",children:e.jsx("h3",{children:n})}),e.jsx("div",{className:"info-panel-content",children:e.jsx("div",{className:"info-panel-body",dangerouslySetInnerHTML:{__html:E}})})]}),a&&e.jsx("div",{className:"info-panel-triangle "+(l?"visible":""),style:{top:o}})]})}function c(){var n,l,r,c,E;const[d,A]=t.useState((null==(n=window.INITIAL_DATA)?void 0:n.activeView)||null),[u,N]=t.useState(null),[T,I]=t.useState(null);t.useEffect(()=>{!async function(){try{const e=await fetch("/api/star-map/"),t=await e.json();I(t)}catch(e){console.error("Failed to fetch star map data:",e)}}()},[]),t.useEffect(()=>{const e=setInterval(async()=>{try{const e=await fetch("/api/active-view/"),t=await e.json();t.updated_at!==(null==d?void 0:d.updated_at)&&(A(t),"CAMPAIGN_DASHBOARD"===t.view_type&&N(null))}catch(e){console.error("Failed to poll active view:",e)}},2e3);return()=>clearInterval(e)},[null==d?void 0:d.updated_at]);const m=(null==d?void 0:d.view_type)||"STANDBY",S="STANDBY"===m,h=((null==T?void 0:T.systems)||[]).filter(e=>e.label).map(e=>({name:e.name,hasSystemMap:!!e.location_slug})),R=(null==(l=window.INITIAL_DATA)?void 0:l.crew)||["Dr. Elena Vasquez - Science Officer",'Marcus "Wrench" Chen - Engineer',"Lt. Sarah Kim - Security","Alex Novak - Pilot"],C=(null==(r=window.INITIAL_DATA)?void 0:r.notes)||["Investigating anomalous readings","Specimen requires containment","Station comms experiencing intermittent interference"],O=(null==(c=window.INITIAL_DATA)?void 0:c.campaignTitle)||"THE OUTER VEIL CAMPAIGN",p=t.useMemo(()=>{var e,t;if(!u||!T)return null;const n=T.systems.find(e=>e.name===u);return n?{name:n.name,type:n.type,description:null==(e=n.info)?void 0:e.description,population:null==(t=n.info)?void 0:t.population,position:n.position,has_system_map:!!n.location_slug,location_slug:n.location_slug}:null},[u,T]),x=t.useMemo(()=>p?function(e){var t,n;return s=[{label:"TYPE",value:null==(t=e.type)?void 0:t.toUpperCase()},{label:"DESCRIPTION",value:e.description},{label:"POPULATION",value:e.population},{label:"COORDINATES",value:null==(n=e.position)?void 0:n.join(", ")},{label:"SYSTEM MAP",value:e.has_system_map?"AVAILABLE":void 0}],s.filter(e=>void 0!==e.value&&null!==e.value&&""!==e.value).map(e=>`<p><span class="info-label">${e.label}:</span> <span class="info-value">${e.value}</span></p>`).join("");var s}(p):"",[p]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"scanline-overlay"}),e.jsx(s,{title:"MOTHERSHIP",subtitle:"TERMINAL",rightText:"STATION ACCESS",hidden:S}),"STANDBY"===m&&e.jsx(a,{title:"MOTHERSHIP",subtitle:"The Outer Veil"}),"CAMPAIGN_DASHBOARD"===m&&e.jsxs(e.Fragment,{children:[e.jsx(i,{campaignTitle:O,crew:R,notes:C,starSystems:h,selectedSystem:u,onSystemSelect:e=>{N(t=>t===e?null:e)},onSystemMapClick:e=>{console.log("Navigate to system map:",e);const t=null==T?void 0:T.systems.find(t=>t.name===e);(null==t?void 0:t.location_slug)&&console.log("Would navigate to:",t.location_slug)}}),e.jsx(o,{title:(null==(E=null==p?void 0:p.name)?void 0:E.toUpperCase())||"SYSTEM INFO",content:x,visible:!!u})]}),"STANDBY"!==m&&"CAMPAIGN_DASHBOARD"!==m&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"var(--color-text-muted)"},children:['View type "',m,'" not yet implemented in React']})]})}const E=document.getElementById("shared-console-root");E&&n.createRoot(E).render(e.jsx(c,{}));
//# sourceMappingURL=shared-console.bundle.js.map
