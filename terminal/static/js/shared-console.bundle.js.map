{"version":3,"file":"shared-console.bundle.js","sources":["../../../src/components/layout/TerminalHeader.tsx","../../../src/components/domain/dashboard/StandbyView.tsx","../../../src/components/domain/dashboard/CampaignDashboard.tsx","../../../src/components/domain/dashboard/InfoPanel.tsx","../../../src/hooks/useTypewriter.ts","../../../src/entries/SharedConsole.tsx"],"sourcesContent":["import './TerminalHeader.css';\n\ninterface TerminalHeaderProps {\n  title: string;\n  subtitle?: string;\n  rightText?: string;\n  hidden?: boolean;\n}\n\nexport function TerminalHeader({\n  title,\n  subtitle,\n  rightText,\n  hidden = false\n}: TerminalHeaderProps) {\n  if (hidden) return null;\n\n  return (\n    <header className=\"terminal-header\">\n      <div className=\"terminal-header-left\">\n        <h1>{title}</h1>\n        {subtitle && <span className=\"subtitle\">{subtitle}</span>}\n      </div>\n      {rightText && (\n        <div className=\"terminal-header-right\">{rightText}</div>\n      )}\n    </header>\n  );\n}\n","import { useEffect, useRef, useCallback } from 'react';\nimport './StandbyView.css';\n\ninterface StandbyViewProps {\n  title?: string;\n  subtitle?: string;\n}\n\n// Line snippets for random text blocks\nconst LINE_SNIPPETS = [\n  'SYSTEM ONLINE', 'ALL SYSTEMS NOMINAL', 'STANDBY MODE', 'AWAITING ORDERS',\n  'QUANTUM FLUX DETECTED', 'STABILIZING FIELD', 'NEURAL INTERFACE ACTIVE',\n  'SYNAPTIC LINK STABLE', 'BIOMETRIC SCAN COMPLETE', 'IDENTITY CONFIRMED',\n  'HULL INTEGRITY: 98%', 'MINOR BREACH SEALED', 'LIFE SUPPORT: NOMINAL',\n  'O2 LEVELS: OPTIMAL', 'REACTOR CORE: STABLE', 'POWER OUTPUT: 100%',\n  'NAVIGATION READY', 'COORDINATES LOCKED', 'COMMS ARRAY: ONLINE',\n  'SIGNAL STRENGTH: FULL', 'SENSOR SWEEP: CLEAR', 'NO CONTACTS DETECTED',\n  'ENGINES: IDLE', 'FUEL: 87%', 'CARGO BAY: SECURE', 'CONTAINMENT HOLDING',\n  'ATMOSPHERIC PRESSURE: STABLE', 'GRAVITY: 1.0G', 'SCANNING...',\n  'ANALYSIS IN PROGRESS', 'PROCESSING...', 'DECRYPTING DATA',\n  'INITIALIZING...', 'BOOT SEQUENCE ACTIVE', 'CRYO BAY: EMPTY',\n  'ALL PODS DORMANT', 'MEDICAL: STANDBY', 'AUTO-DOC READY',\n  'WEAPONS: OFFLINE', 'SAFETY PROTOCOLS ENGAGED', 'SHIELDS: CHARGING',\n  '42% CAPACITY', 'JUMP DRIVE: READY', 'FTL AVAILABLE',\n  'RADIATION LEVELS: SAFE', 'DOSE: 0.3 mSv', 'TARGETING SYSTEMS: OFFLINE',\n  'PEACE MODE ACTIVE', 'DRONE BAY: SEALED', '3 UNITS READY',\n  'MINING LASER: STANDBY', 'CAPACITOR CHARGED', 'EMERGENCY BEACON: ACTIVE',\n  'BROADCASTING SOS', 'WARP CORE: STABLE', 'CONTAINMENT AT 100%',\n  'AIRLOCK STATUS: SECURE', 'PRESSURE NOMINAL', 'LABORATORY: SEALED',\n  'QUARANTINE ACTIVE', 'BRIDGE ACCESS: GRANTED', 'WELCOME COMMANDER',\n  'UNKNOWN SIGNAL DETECTED', 'TRACKING SOURCE', 'HEAT SIGNATURE: ANOMALOUS',\n  'INVESTIGATING', 'PROXIMITY ALERT', 'OBJECT AT 200M',\n  'SYSTEM DIAGNOSTICS COMPLETE', 'NO ERRORS FOUND', 'FIRMWARE UPDATE AVAILABLE',\n  'VERSION 3.7.2', 'BACKUP POWER: 100%', 'BATTERIES FULL',\n  'WASTE RECYCLING: ACTIVE', 'EFFICIENCY: 94%', 'FOOD STORES: ADEQUATE',\n  '142 DAYS REMAINING', 'WATER PURIFICATION: ONLINE', 'RESERVES: 89%',\n  'SUIT TELEMETRY: NOMINAL', 'ALL CREW ACCOUNTED FOR', 'BLACK BOX: RECORDING',\n  'FLIGHT DATA LOGGED', 'AUTO-PILOT: ENGAGED', 'COURSE LOCKED',\n  'STELLAR CARTOGRAPHY', 'MAP UPDATE: 99%', 'ANOMALY DETECTED',\n  'CLASSIFICATION: UNKNOWN', 'TEMPORAL DRIFT: MINIMAL', 'CHRONOMETER SYNCED',\n  'EXOTIC MATTER: DETECTED', 'ANALYSIS PENDING', 'VOID EXPOSURE: MINIMAL',\n  'CREW SAFETY: GREEN', 'DARK MATTER READINGS', 'THRESHOLD EXCEEDED',\n  'SUBSPACE INTERFERENCE', 'COMPENSATING', 'ALIEN ARTIFACT DETECTED',\n  'ORIGIN: UNKNOWN', 'DISTRESS CALL RECEIVED', 'INVESTIGATING TRANSMISSION'\n];\n\ninterface BlockData {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport function StandbyView({\n  title = 'MOTHERSHIP',\n  subtitle = 'The Outer Veil'\n}: StandbyViewProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const mainTextRef = useRef<HTMLDivElement>(null);\n  const subtitleRef = useRef<HTMLDivElement>(null);\n  const activeBlocksRef = useRef<BlockData[]>([]);\n  const spawnTimeoutRef = useRef<number | null>(null);\n\n  // Randomize glitch direction\n  const randomizeGlitchDirection = useCallback((element: HTMLElement) => {\n    const x1 = (Math.random() * 70 - 35).toFixed(0);\n    const y1 = (Math.random() * 40 - 20).toFixed(0);\n    const x2 = (Math.random() * 60 - 30).toFixed(0);\n    const y2 = (Math.random() * 40 - 20).toFixed(0);\n    const x3 = (Math.random() * 40 - 20).toFixed(0);\n    const y3 = (Math.random() * 30 - 15).toFixed(0);\n\n    element.style.setProperty('--glitch-x1', `${x1}px`);\n    element.style.setProperty('--glitch-y1', `${y1}px`);\n    element.style.setProperty('--glitch-x2', `${x2}px`);\n    element.style.setProperty('--glitch-y2', `${y2}px`);\n    element.style.setProperty('--glitch-x3', `${x3}px`);\n    element.style.setProperty('--glitch-y3', `${y3}px`);\n  }, []);\n\n  // Get random lines for text blocks\n  const getRandomLines = useCallback(() => {\n    const lineCount = Math.floor(Math.random() * 4) + 1;\n    const selectedLines: string[] = [];\n    const availableLines = [...LINE_SNIPPETS];\n\n    for (let i = 0; i < lineCount; i++) {\n      const randomIndex = Math.floor(Math.random() * availableLines.length);\n      selectedLines.push('> ' + availableLines[randomIndex]);\n      availableLines.splice(randomIndex, 1);\n    }\n\n    return selectedLines.join('\\n');\n  }, []);\n\n  // Check collision with existing blocks\n  const checkCollision = useCallback((x: number, y: number, width: number, height: number) => {\n    for (const block of activeBlocksRef.current) {\n      if (!(x + width < block.x ||\n            x > block.x + block.width ||\n            y + height < block.y ||\n            y > block.y + block.height)) {\n        return true;\n      }\n    }\n    return false;\n  }, []);\n\n  // Find safe position for new block\n  const findSafePosition = useCallback((width: number, height: number): { x: number; y: number } | null => {\n    const maxAttempts = 50;\n\n    for (let attempt = 0; attempt < maxAttempts; attempt++) {\n      let x = Math.random() * 80 + 10;\n      let y = Math.random() * 80 + 10;\n\n      // Avoid center area\n      if (x > 30 && x < 70 && y > 30 && y < 70) {\n        if (Math.random() > 0.5) {\n          x = x < 50 ? x - 35 : x + 35;\n        } else {\n          y = y < 50 ? y - 35 : y + 35;\n        }\n      }\n\n      if (!checkCollision(x, y, width, height)) {\n        return { x, y };\n      }\n    }\n\n    return null;\n  }, [checkCollision]);\n\n  // Create a text block\n  const createTextBlock = useCallback(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const text = getRandomLines();\n    const lineCount = text.split('\\n').length;\n    const maxLineLength = Math.max(...text.split('\\n').map(line => line.length));\n    const estimatedWidth = maxLineLength * 0.6;\n    const estimatedHeight = lineCount * 2;\n\n    const position = findSafePosition(estimatedWidth, estimatedHeight);\n    if (!position) return;\n\n    const block = document.createElement('div');\n    block.className = 'text-block';\n    block.style.left = position.x + '%';\n    block.style.top = position.y + '%';\n\n    container.appendChild(block);\n\n    const blockData: BlockData = {\n      x: position.x,\n      y: position.y,\n      width: estimatedWidth,\n      height: estimatedHeight\n    };\n    activeBlocksRef.current.push(blockData);\n\n    // Typewriter effect\n    let currentText = '';\n    let charIndex = 0;\n\n    const typeInterval = setInterval(() => {\n      if (charIndex < text.length) {\n        currentText += text[charIndex];\n        block.textContent = currentText;\n        charIndex++;\n      } else {\n        clearInterval(typeInterval);\n      }\n    }, 50);\n\n    // Remove after animation\n    setTimeout(() => {\n      block.remove();\n      const index = activeBlocksRef.current.indexOf(blockData);\n      if (index > -1) {\n        activeBlocksRef.current.splice(index, 1);\n      }\n    }, 6000);\n  }, [getRandomLines, findSafePosition]);\n\n  // Spawn text blocks continuously\n  const spawnTextBlocks = useCallback(() => {\n    createTextBlock();\n    const nextDelay = Math.random() * 600 + 400;\n    spawnTimeoutRef.current = window.setTimeout(spawnTextBlocks, nextDelay);\n  }, [createTextBlock]);\n\n  // Initialize glitch animations and text blocks\n  useEffect(() => {\n    const mainText = mainTextRef.current;\n    const subtitleEl = subtitleRef.current;\n\n    // Initial randomization\n    if (mainText) randomizeGlitchDirection(mainText);\n    if (subtitleEl) randomizeGlitchDirection(subtitleEl);\n\n    // Randomize on animation iteration\n    const handleMainIteration = () => {\n      if (mainText) randomizeGlitchDirection(mainText);\n    };\n    const handleSubtitleIteration = () => {\n      if (subtitleEl) randomizeGlitchDirection(subtitleEl);\n    };\n\n    mainText?.addEventListener('animationiteration', handleMainIteration);\n    subtitleEl?.addEventListener('animationiteration', handleSubtitleIteration);\n\n    // Start spawning text blocks\n    const startTimeout = window.setTimeout(spawnTextBlocks, 500);\n\n    return () => {\n      mainText?.removeEventListener('animationiteration', handleMainIteration);\n      subtitleEl?.removeEventListener('animationiteration', handleSubtitleIteration);\n      clearTimeout(startTimeout);\n      if (spawnTimeoutRef.current) {\n        clearTimeout(spawnTimeoutRef.current);\n      }\n    };\n  }, [randomizeGlitchDirection, spawnTextBlocks]);\n\n  return (\n    <div className=\"standby-view\" ref={containerRef}>\n      <div className=\"standby-logo\">\n        <div\n          className=\"standby-text\"\n          ref={mainTextRef}\n          data-text={title}\n        >\n          {title}\n        </div>\n        <div\n          className=\"standby-subtitle\"\n          ref={subtitleRef}\n        >\n          {subtitle}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { ReactNode } from 'react';\nimport './CampaignDashboard.css';\n\ninterface DashboardPanelProps {\n  title: string;\n  children: ReactNode;\n  className?: string;\n}\n\n// Reusable panel component for dashboard\nfunction DashboardPanel({ title, children, className = '' }: DashboardPanelProps) {\n  return (\n    <div className={`panel-base border-all ${className}`}>\n      <div className=\"dashboard-panel-header\">\n        <h3>{title}</h3>\n      </div>\n      <div className=\"dashboard-panel-content\">\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport interface StarSystem {\n  name: string;\n  hasSystemMap: boolean;\n}\n\ninterface CampaignDashboardProps {\n  campaignTitle?: string;\n  crew?: string[];\n  notes?: string[];\n  starSystems?: StarSystem[];\n  statusItems?: string[];\n  onSystemSelect?: (systemName: string) => void;\n  onSystemMapClick?: (systemName: string) => void;\n  selectedSystem?: string | null;\n}\n\nexport function CampaignDashboard({\n  campaignTitle = 'THE OUTER VEIL CAMPAIGN',\n  crew = [],\n  notes = [],\n  starSystems = [],\n  statusItems = [],\n  onSystemSelect,\n  onSystemMapClick,\n  selectedSystem = null\n}: CampaignDashboardProps) {\n  return (\n    <div className=\"campaign-dashboard\">\n      {/* Top Panel - Campaign Title */}\n      <div className=\"dashboard-top panel-base chamfer-bl-br border-all corner-line-bl-br\">\n        <div className=\"dashboard-top-content\">{campaignTitle}</div>\n      </div>\n\n      {/* Left Column */}\n      <div className=\"dashboard-left\">\n        {/* CREW Panel */}\n        <DashboardPanel title=\"CREW\" className=\"chamfer-tr-bl corner-line-tr-bl\">\n          {crew.length > 0 ? (\n            crew.map((member, i) => <p key={i}>&gt; {member}</p>)\n          ) : (\n            <p>&gt; No crew assigned</p>\n          )}\n        </DashboardPanel>\n\n        {/* NOTES Panel */}\n        <DashboardPanel title=\"NOTES\" className=\"chamfer-tr-bl corner-line-tr-bl\">\n          {notes.length > 0 ? (\n            notes.map((note, i) => <p key={i}>&gt; {note}</p>)\n          ) : (\n            <p>&gt; No notes</p>\n          )}\n        </DashboardPanel>\n      </div>\n\n      {/* Right Column */}\n      <div className=\"dashboard-right\">\n        {/* STAR MAP Panel */}\n        <DashboardPanel title=\"STAR MAP\" className=\"chamfer-tl-br corner-line-tl-br\">\n          {starSystems.length > 0 ? (\n            starSystems.map((system) => (\n              <div\n                key={system.name}\n                className={`star-system-row ${selectedSystem === system.name ? 'selected' : ''}`}\n                onClick={() => onSystemSelect?.(system.name)}\n              >\n                <div className=\"star-system-content\">\n                  <div className={`star-system-checkbox ${selectedSystem === system.name ? 'checked' : ''}`} />\n                  <div className=\"star-system-name\">{system.name}</div>\n                </div>\n                {system.hasSystemMap && (\n                  <div\n                    className=\"system-map-btn-container\"\n                    title=\"View system map\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onSystemMapClick?.(system.name);\n                    }}\n                  >\n                    <span className=\"system-map-btn-icon\">▶</span>\n                  </div>\n                )}\n              </div>\n            ))\n          ) : (\n            <p>&gt; No star systems found</p>\n          )}\n        </DashboardPanel>\n\n        {/* STATUS Panel */}\n        <DashboardPanel title=\"STATUS\" className=\"chamfer-tl-br corner-line-tl-br\">\n          {statusItems.length > 0 ? (\n            statusItems.map((item, i) => <p key={i}>&gt; {item}</p>)\n          ) : (\n            <>\n              <p>&gt; All systems nominal</p>\n              <p>&gt; Course steady</p>\n            </>\n          )}\n        </DashboardPanel>\n      </div>\n\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { useTypewriter } from '@hooks/useTypewriter';\nimport './InfoPanel.css';\n\ninterface InfoPanelProps {\n  /** Panel title displayed in header */\n  title: string;\n  /** HTML content to display with typewriter effect */\n  content: string;\n  /** Whether the panel is visible */\n  visible: boolean;\n  /** Show decorative elements below panel */\n  showDecorators?: boolean;\n  /** Typewriter speed in ms per character */\n  typewriterSpeed?: number;\n}\n\n/**\n * Reusable floating info panel with typewriter effect.\n * Can be used for system info, planet info, station info, etc.\n */\nexport function InfoPanel({\n  title,\n  content,\n  visible,\n  showDecorators = true,\n  typewriterSpeed = 15,\n}: InfoPanelProps) {\n  const panelRef = useRef<HTMLDivElement>(null);\n  const [triangleTop, setTriangleTop] = useState(0);\n\n  // Typewriter effect - cursor is now inline in the content\n  const { displayedContent } = useTypewriter(\n    visible ? content : '',\n    { speed: typewriterSpeed, showCursor: true }\n  );\n\n  // Update triangle position when panel resizes or visibility changes\n  useEffect(() => {\n    function updatePosition() {\n      if (!panelRef.current || !visible || !showDecorators) return;\n\n      const panelRect = panelRef.current.getBoundingClientRect();\n      // Triangle positioned below panel bottom\n      const triangleHeight = 35;\n      setTriangleTop(panelRect.bottom + 5 - triangleHeight - 5);\n    }\n\n    updatePosition();\n\n    // Set up ResizeObserver\n    const resizeObserver = new ResizeObserver(updatePosition);\n    if (panelRef.current) {\n      resizeObserver.observe(panelRef.current);\n    }\n\n    window.addEventListener('resize', updatePosition);\n\n    return () => {\n      resizeObserver.disconnect();\n      window.removeEventListener('resize', updatePosition);\n    };\n  }, [visible, showDecorators]);\n\n  return (\n    <>\n      {/* Main info panel */}\n      <div\n        ref={panelRef}\n        className={`info-panel ${visible ? 'visible' : ''}`}\n      >\n        <div className=\"info-panel-header\">\n          <h3>{title}</h3>\n        </div>\n        <div className=\"info-panel-content\">\n          <div\n            className=\"info-panel-body\"\n            dangerouslySetInnerHTML={{ __html: displayedContent }}\n          />\n        </div>\n      </div>\n\n      {/* Triangle decoration - positioned as sibling to avoid clip-path clipping */}\n      {showDecorators && (\n        <div\n          className={`info-panel-triangle ${visible ? 'visible' : ''}`}\n          style={{ top: triangleTop }}\n        />\n      )}\n    </>\n  );\n}\n\n// ============================================\n// Helper functions to build content HTML\n// ============================================\n\ninterface InfoField {\n  label: string;\n  value: string | number | boolean | undefined | null;\n}\n\n/**\n * Build HTML for a list of label/value pairs.\n * Skips undefined/null values.\n */\nexport function buildInfoHTML(fields: InfoField[]): string {\n  return fields\n    .filter(f => f.value !== undefined && f.value !== null && f.value !== '')\n    .map(f => `<p><span class=\"info-label\">${f.label}:</span> <span class=\"info-value\">${f.value}</span></p>`)\n    .join('');\n}\n\n/**\n * Build HTML for star system info\n */\nexport function buildSystemInfoHTML(system: {\n  type?: string;\n  description?: string;\n  population?: string;\n  position?: number[];\n  has_system_map?: boolean;\n}): string {\n  const fields: InfoField[] = [\n    { label: 'TYPE', value: system.type?.toUpperCase() },\n    { label: 'DESCRIPTION', value: system.description },\n    { label: 'POPULATION', value: system.population },\n    { label: 'COORDINATES', value: system.position?.join(', ') },\n    { label: 'SYSTEM MAP', value: system.has_system_map ? 'AVAILABLE' : undefined },\n  ];\n  return buildInfoHTML(fields);\n}\n\n/**\n * Build HTML for planet info\n */\nexport function buildPlanetInfoHTML(planet: {\n  type?: string;\n  description?: string;\n  population?: string;\n  habitability?: string;\n  industry?: string;\n  orbital_radius?: number;\n  orbital_period?: number;\n  inclination?: number;\n  tidally_locked?: boolean;\n}): string {\n  const fields: InfoField[] = [\n    { label: 'TYPE', value: planet.type?.toUpperCase().replace('_', ' ') },\n    { label: 'DESCRIPTION', value: planet.description },\n    { label: 'POPULATION', value: planet.population },\n    { label: 'HABITABILITY', value: planet.habitability },\n    { label: 'INDUSTRY', value: planet.industry },\n    { label: 'ORBITAL RADIUS', value: planet.orbital_radius ? `${planet.orbital_radius} AU` : undefined },\n    { label: 'ORBITAL PERIOD', value: planet.orbital_period ? `${planet.orbital_period} days` : undefined },\n    { label: 'INCLINATION', value: planet.inclination !== undefined ? `${planet.inclination}°` : undefined },\n    { label: 'ROTATION', value: planet.tidally_locked !== undefined ? (planet.tidally_locked ? 'TIDALLY LOCKED' : 'NORMAL') : undefined },\n  ];\n  return buildInfoHTML(fields);\n}\n\n/**\n * Build HTML for moon info\n */\nexport function buildMoonInfoHTML(moon: {\n  type?: string;\n  description?: string;\n  population?: string;\n  orbital_radius?: number;\n  has_facilities?: boolean;\n}): string {\n  const fields: InfoField[] = [\n    { label: 'TYPE', value: moon.type?.toUpperCase() },\n    { label: 'DESCRIPTION', value: moon.description },\n    { label: 'POPULATION', value: moon.population },\n    { label: 'ORBITAL RADIUS', value: moon.orbital_radius ? `${moon.orbital_radius} km` : undefined },\n    { label: 'FACILITIES', value: moon.has_facilities ? 'PRESENT' : undefined },\n  ];\n  return buildInfoHTML(fields);\n}\n\n/**\n * Build HTML for station/facility info\n */\nexport function buildStationInfoHTML(station: {\n  type?: string;\n  description?: string;\n  population?: string;\n  status?: string;\n  orbital_radius?: number;\n}): string {\n  const fields: InfoField[] = [\n    { label: 'TYPE', value: station.type?.toUpperCase() },\n    { label: 'DESCRIPTION', value: station.description },\n    { label: 'POPULATION', value: station.population },\n    { label: 'STATUS', value: station.status?.toUpperCase() },\n    { label: 'ORBITAL RADIUS', value: station.orbital_radius ? `${station.orbital_radius} km` : undefined },\n  ];\n  return buildInfoHTML(fields);\n}\n\n/**\n * Build HTML for surface marker info\n */\nexport function buildSurfaceMarkerInfoHTML(marker: {\n  type?: string;\n  description?: string;\n  population?: string;\n  latitude?: number;\n  longitude?: number;\n  traffic?: string;\n}): string {\n  const fields: InfoField[] = [\n    { label: 'TYPE', value: marker.type?.toUpperCase() },\n    { label: 'DESCRIPTION', value: marker.description },\n    { label: 'POPULATION', value: marker.population },\n    { label: 'COORDINATES', value: marker.latitude !== undefined && marker.longitude !== undefined\n      ? `${marker.latitude.toFixed(1)}°, ${marker.longitude.toFixed(1)}°`\n      : undefined },\n    { label: 'TRAFFIC', value: marker.traffic },\n  ];\n  return buildInfoHTML(fields);\n}\n","import { useState, useEffect, useRef, useCallback } from 'react';\n\ninterface UseTypewriterOptions {\n  speed?: number;\n  showCursor?: boolean;\n  cursorChar?: string;\n  onComplete?: () => void;\n}\n\ninterface UseTypewriterReturn {\n  displayedContent: string;\n  isTyping: boolean;\n  reset: () => void;\n}\n\n/**\n * Hook that provides a typewriter animation effect for text content.\n * Supports HTML content by preserving tags while animating text.\n * Cursor is inserted inline at the end of the typed content.\n */\nexport function useTypewriter(\n  content: string,\n  options: UseTypewriterOptions = {}\n): UseTypewriterReturn {\n  const { speed = 15, showCursor = true, cursorChar = '_', onComplete } = options;\n  const [displayedContent, setDisplayedContent] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const operationIdRef = useRef(0);\n  const timeoutRef = useRef<number | null>(null);\n\n  const reset = useCallback(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    setDisplayedContent('');\n    setIsTyping(false);\n  }, []);\n\n  useEffect(() => {\n    if (!content) {\n      setDisplayedContent('');\n      setIsTyping(false);\n      return;\n    }\n\n    // Cancel any existing animation\n    operationIdRef.current++;\n    const thisOperationId = operationIdRef.current;\n\n    // Parse HTML to extract text content for animation\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = content;\n    const fullText = tempDiv.textContent || '';\n\n    let charIndex = 0;\n    setDisplayedContent('');\n    setIsTyping(true);\n\n    // Track where the cursor should be inserted\n    interface BuildContext {\n      textIndex: number;\n      cursorInserted: boolean;\n      targetCharIndex: number;\n    }\n\n    function buildHTML(node: Node, ctx: BuildContext): string {\n      if (node.nodeType === Node.TEXT_NODE) {\n        const nodeText = node.textContent || '';\n        const nodeStartIndex = ctx.textIndex;\n        const nodeEndIndex = ctx.textIndex + nodeText.length;\n        ctx.textIndex = nodeEndIndex;\n\n        // Calculate how many characters to show from this node\n        const charsToShow = Math.min(\n          nodeText.length,\n          Math.max(0, ctx.targetCharIndex - nodeStartIndex)\n        );\n\n        const visibleText = nodeText.substring(0, charsToShow);\n\n        // Insert cursor at the end of visible text if this is where typing stopped\n        if (showCursor && !ctx.cursorInserted && ctx.targetCharIndex >= nodeStartIndex && ctx.targetCharIndex <= nodeEndIndex) {\n          ctx.cursorInserted = true;\n          return visibleText + `<span class=\"typing-cursor\">${cursorChar}</span>`;\n        }\n\n        return visibleText;\n      } else if (node.nodeType === Node.ELEMENT_NODE) {\n        const element = node as Element;\n        const tagName = element.tagName.toLowerCase();\n        const className = element.className ? ` class=\"${element.className}\"` : '';\n        let innerHTML = '';\n\n        for (const child of Array.from(node.childNodes)) {\n          innerHTML += buildHTML(child, ctx);\n        }\n\n        if (innerHTML.length > 0 || ctx.cursorInserted) {\n          return `<${tagName}${className}>${innerHTML}</${tagName}>`;\n        }\n        return '';\n      }\n      return '';\n    }\n\n    function typeNextChar() {\n      // Check if this operation was cancelled\n      if (operationIdRef.current !== thisOperationId) {\n        return;\n      }\n\n      if (charIndex < fullText.length) {\n        charIndex++;\n\n        const ctx: BuildContext = {\n          textIndex: 0,\n          cursorInserted: false,\n          targetCharIndex: charIndex,\n        };\n\n        let currentHTML = '';\n        for (const child of Array.from(tempDiv.childNodes)) {\n          currentHTML += buildHTML(child, ctx);\n        }\n\n        // If cursor wasn't inserted (edge case), append it at the end\n        if (showCursor && !ctx.cursorInserted) {\n          currentHTML += `<span class=\"typing-cursor\">${cursorChar}</span>`;\n        }\n\n        setDisplayedContent(currentHTML);\n        timeoutRef.current = window.setTimeout(typeNextChar, speed);\n      } else {\n        // Animation complete - show final content without cursor\n        const ctx: BuildContext = {\n          textIndex: 0,\n          cursorInserted: true, // Prevent cursor insertion\n          targetCharIndex: fullText.length,\n        };\n\n        let finalHTML = '';\n        for (const child of Array.from(tempDiv.childNodes)) {\n          finalHTML += buildHTML(child, ctx);\n        }\n\n        setDisplayedContent(finalHTML);\n        setIsTyping(false);\n        onComplete?.();\n      }\n    }\n\n    typeNextChar();\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [content, speed, showCursor, cursorChar, onComplete]);\n\n  return { displayedContent, isTyping, reset };\n}\n","import { useState, useEffect, useMemo } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport '../styles/global.css';\nimport { TerminalHeader } from '@components/layout/TerminalHeader';\nimport { StandbyView } from '@components/domain/dashboard/StandbyView';\nimport { CampaignDashboard, StarSystem } from '@components/domain/dashboard/CampaignDashboard';\nimport { InfoPanel, buildSystemInfoHTML } from '@components/domain/dashboard/InfoPanel';\n\n// View types matching Django's ActiveView model\ntype ViewType = 'STANDBY' | 'CAMPAIGN_DASHBOARD' | 'ENCOUNTER_MAP' | 'COMM_TERMINAL' | 'MESSAGES' | 'SHIP_DASHBOARD';\n\ninterface ActiveView {\n  view_type: ViewType;\n  location_slug: string;\n  view_slug: string;\n  overlay_location_slug: string;\n  overlay_terminal_slug: string;\n  updated_at: string;\n}\n\ninterface StarMapSystem {\n  name: string;\n  position: number[];\n  color: number;\n  size: number;\n  type: string;\n  label?: boolean;\n  location_slug?: string;\n  info?: {\n    description?: string;\n    population?: string;\n  };\n}\n\ninterface StarMapData {\n  systems: StarMapSystem[];\n}\n\ninterface InitialData {\n  activeView: ActiveView;\n  starSystems?: StarSystem[];\n  crew?: string[];\n  notes?: string[];\n  campaignTitle?: string;\n}\n\n// Get initial data from Django (passed via window object)\ndeclare global {\n  interface Window {\n    INITIAL_DATA?: InitialData;\n  }\n}\n\nfunction SharedConsole() {\n  const [activeView, setActiveView] = useState<ActiveView | null>(\n    window.INITIAL_DATA?.activeView || null\n  );\n  const [selectedSystem, setSelectedSystem] = useState<string | null>(null);\n  const [starMapData, setStarMapData] = useState<StarMapData | null>(null);\n\n  // Fetch star map data on mount\n  useEffect(() => {\n    async function fetchStarMapData() {\n      try {\n        const response = await fetch('/api/star-map/');\n        const data = await response.json();\n        setStarMapData(data);\n      } catch (error) {\n        console.error('Failed to fetch star map data:', error);\n      }\n    }\n    fetchStarMapData();\n  }, []);\n\n  // Poll for active view changes\n  useEffect(() => {\n    const pollInterval = setInterval(async () => {\n      try {\n        const response = await fetch('/api/active-view/');\n        const data = await response.json();\n\n        // Check if view changed\n        if (data.updated_at !== activeView?.updated_at) {\n          setActiveView(data);\n          // Reset selection on view change\n          if (data.view_type === 'CAMPAIGN_DASHBOARD') {\n            setSelectedSystem(null);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to poll active view:', error);\n      }\n    }, 2000);\n\n    return () => clearInterval(pollInterval);\n  }, [activeView?.updated_at]);\n\n  const viewType = activeView?.view_type || 'STANDBY';\n  const isStandby = viewType === 'STANDBY';\n\n  // Build star systems list from API data\n  const starSystems: StarSystem[] = (starMapData?.systems || [])\n    .filter(system => system.label)\n    .map(system => ({\n      name: system.name,\n      hasSystemMap: !!system.location_slug,\n    }));\n\n  // Get data from initial Django context (fallback)\n  const crew = window.INITIAL_DATA?.crew || [\n    'Dr. Elena Vasquez - Science Officer',\n    'Marcus \"Wrench\" Chen - Engineer',\n    'Lt. Sarah Kim - Security',\n    'Alex Novak - Pilot'\n  ];\n  const notes = window.INITIAL_DATA?.notes || [\n    'Investigating anomalous readings',\n    'Specimen requires containment',\n    'Station comms experiencing intermittent interference'\n  ];\n  const campaignTitle = window.INITIAL_DATA?.campaignTitle || 'THE OUTER VEIL CAMPAIGN';\n\n  // Get selected system data and build content HTML\n  const selectedSystemData = useMemo(() => {\n    if (!selectedSystem || !starMapData) return null;\n    const system = starMapData.systems.find(s => s.name === selectedSystem);\n    if (!system) return null;\n    return {\n      name: system.name,\n      type: system.type,\n      description: system.info?.description,\n      population: system.info?.population,\n      position: system.position,\n      has_system_map: !!system.location_slug,\n      location_slug: system.location_slug,\n    };\n  }, [selectedSystem, starMapData]);\n\n  // Build info panel content HTML (memoized to prevent re-renders)\n  const infoPanelContent = useMemo(() => {\n    if (!selectedSystemData) return '';\n    return buildSystemInfoHTML(selectedSystemData);\n  }, [selectedSystemData]);\n\n  const handleSystemSelect = (systemName: string) => {\n    setSelectedSystem(prev => prev === systemName ? null : systemName);\n  };\n\n  const handleSystemMapClick = (systemName: string) => {\n    console.log('Navigate to system map:', systemName);\n    // Find the system's location_slug\n    const system = starMapData?.systems.find(s => s.name === systemName);\n    if (system?.location_slug) {\n      // TODO: Trigger navigation to system map view\n      // This would typically POST to the GM console or update active view\n      console.log('Would navigate to:', system.location_slug);\n    }\n  };\n\n  return (\n    <>\n      {/* Scanline overlay */}\n      <div className=\"scanline-overlay\" />\n\n      {/* Header - hidden in standby mode */}\n      <TerminalHeader\n        title=\"MOTHERSHIP\"\n        subtitle=\"TERMINAL\"\n        rightText=\"STATION ACCESS\"\n        hidden={isStandby}\n      />\n\n      {/* View content */}\n      {viewType === 'STANDBY' && (\n        <StandbyView title=\"MOTHERSHIP\" subtitle=\"The Outer Veil\" />\n      )}\n\n      {viewType === 'CAMPAIGN_DASHBOARD' && (\n        <>\n          <CampaignDashboard\n            campaignTitle={campaignTitle}\n            crew={crew}\n            notes={notes}\n            starSystems={starSystems}\n            selectedSystem={selectedSystem}\n            onSystemSelect={handleSystemSelect}\n            onSystemMapClick={handleSystemMapClick}\n          />\n\n          {/* Info Panel - reusable floating panel for selected item info */}\n          <InfoPanel\n            title={selectedSystemData?.name?.toUpperCase() || 'SYSTEM INFO'}\n            content={infoPanelContent}\n            visible={!!selectedSystem}\n          />\n        </>\n      )}\n\n      {/* Other view types can be added here */}\n      {viewType !== 'STANDBY' && viewType !== 'CAMPAIGN_DASHBOARD' && (\n        <div style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100vh',\n          color: 'var(--color-text-muted)'\n        }}>\n          View type \"{viewType}\" not yet implemented in React\n        </div>\n      )}\n    </>\n  );\n}\n\n// Mount the app\nconst root = document.getElementById('shared-console-root');\nif (root) {\n  ReactDOM.createRoot(root).render(<SharedConsole />);\n}\n"],"names":["TerminalHeader","title","subtitle","rightText","hidden","jsxs","className","children","jsx","LINE_SNIPPETS","StandbyView","containerRef","useRef","mainTextRef","subtitleRef","activeBlocksRef","spawnTimeoutRef","randomizeGlitchDirection","useCallback","element","x1","Math","random","toFixed","y1","x2","y2","x3","y3","style","setProperty","getRandomLines","lineCount","floor","selectedLines","availableLines","i","randomIndex","length","push","splice","join","checkCollision","x","y","width","height","block","current","findSafePosition","attempt","createTextBlock","container","text","split","estimatedWidth","max","map","line","estimatedHeight","position","document","createElement","left","top","appendChild","blockData","currentText","charIndex","typeInterval","setInterval","textContent","clearInterval","setTimeout","remove","index","indexOf","spawnTextBlocks","nextDelay","window","useEffect","mainText","subtitleEl","handleMainIteration","handleSubtitleIteration","addEventListener","startTimeout","removeEventListener","clearTimeout","ref","DashboardPanel","CampaignDashboard","campaignTitle","crew","notes","starSystems","statusItems","onSystemSelect","onSystemMapClick","selectedSystem","member","note","system","name","onClick","hasSystemMap","e","stopPropagation","item","Fragment","InfoPanel","content","visible","showDecorators","typewriterSpeed","panelRef","triangleTop","setTriangleTop","useState","displayedContent","options","speed","showCursor","cursorChar","onComplete","setDisplayedContent","isTyping","setIsTyping","operationIdRef","timeoutRef","reset","thisOperationId","tempDiv","innerHTML","fullText","buildHTML","node","ctx","nodeType","Node","TEXT_NODE","nodeText","nodeStartIndex","textIndex","nodeEndIndex","charsToShow","min","targetCharIndex","visibleText","substring","cursorInserted","ELEMENT_NODE","tagName","toLowerCase","child","Array","from","childNodes","typeNextChar","currentHTML","finalHTML","useTypewriter","updatePosition","panelRect","getBoundingClientRect","bottom","resizeObserver","ResizeObserver","observe","disconnect","dangerouslySetInnerHTML","__html","SharedConsole","activeView","setActiveView","_a","INITIAL_DATA","setSelectedSystem","starMapData","setStarMapData","async","response","fetch","data","json","error","console","fetchStarMapData","pollInterval","updated_at","view_type","viewType","isStandby","systems","filter","label","location_slug","_b","_c","_d","selectedSystemData","useMemo","find","s","type","description","info","population","has_system_map","infoPanelContent","fields","value","toUpperCase","f","buildSystemInfoHTML","systemName","prev","log","_e","display","justifyContent","alignItems","color","root","getElementById","ReactDOM","createRoot","render"],"mappings":"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"}